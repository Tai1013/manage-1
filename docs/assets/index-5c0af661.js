import{u as j,a as L,t as g,p as M,b as N}from"./index-a1199599.js";/* empty css                                                      */import{d as w,M as r,a3 as b,P as $,z as t,a2 as v,O as p,Z as y,az as h,a8 as O,x as V,L as I,a6 as T,a7 as B,r as R,Y as S,ag as x,aE as D,T as P,w as H,ae as K,a9 as k,D as G,aV as Y,be as Z,bf as J}from"./vendor-83e22a84.js";import{d as Q,e as E,f as F,g as W,h as q,i as X,j as _,k as ee}from"./element-plus-0-75e0eb6e.js";import{_ as le,u as ae}from"./index.vuevuetypescriptsetuptruelang-f2af950f.js";import{_ as U}from"./plugin-vueexport-helper-c27b6911.js";import{u as te}from"./useLoading-dc27eef9.js";import"./firebase-3a4f80eb.js";import"./element-plus-1-30446d03.js";const oe={name:"FieldComp"},ie=w({...oe,props:{form:{type:Object,required:!0},field:{type:Object,required:!0}},setup(e){const u=(i,o)=>{if(o.onChange)return o.onChange({value:i,field:o})},n=i=>i.value?i.value:i;return(i,o)=>!e.field.component||e.field.component==="input"?(r(),b(t(Q),$({key:0,modelValue:e.form[e.field.prop],"onUpdate:modelValue":o[0]||(o[0]=a=>e.form[e.field.prop]=a)},e.field.componentAttr,{type:e.field.type,clearable:e.field.clearable,disabled:e.field.disabled,size:e.field.size,placeholder:e.field.placeholder?i.$t(`placeholder.${e.field.placeholder}`):i.$t("placeholder.請輸入"),onChange:o[1]||(o[1]=a=>u(a,e.field))}),null,16,["modelValue","type","clearable","disabled","size","placeholder"])):e.field.component==="select"?(r(),b(t(F),$({key:1,modelValue:e.form[e.field.prop],"onUpdate:modelValue":o[2]||(o[2]=a=>e.form[e.field.prop]=a)},e.field.componentAttr,{clearable:e.field.clearable,disabled:e.field.disabled,size:e.field.size,placeholder:e.field.placeholder?i.$t(`placeholder.${e.field.placeholder}`):i.$t("placeholder.請選擇"),onChange:o[3]||(o[3]=a=>u(a,e.field))}),{default:v(()=>[(r(!0),p(y,null,h(n(e.field.options),a=>(r(),b(t(E),{key:a.value,label:a.label,value:a.value,disabled:a.disabled},null,8,["label","value","disabled"]))),128))]),_:1},16,["modelValue","clearable","disabled","size","placeholder"])):e.field.component==="select-group"?(r(),b(t(F),$({key:2,modelValue:e.form[e.field.prop],"onUpdate:modelValue":o[4]||(o[4]=a=>e.form[e.field.prop]=a)},e.field.componentAttr,{clearable:e.field.clearable,disabled:e.field.disabled,size:e.field.size,placeholder:e.field.placeholder?i.$t(`placeholder.${e.field.placeholder}`):i.$t("placeholder.請選擇"),onChange:o[5]||(o[5]=a=>u(a,e.field))}),{default:v(()=>[(r(!0),p(y,null,h(n(e.field.options),a=>(r(),b(t(W),{key:a.label,label:a.label},{default:v(()=>[(r(!0),p(y,null,h(n(a.options),l=>(r(),b(t(E),{key:l.value,label:l.label,value:l.value,disabled:l.disabled},null,8,["label","value","disabled"]))),128))]),_:2},1032,["label"]))),128))]),_:1},16,["modelValue","clearable","disabled","size","placeholder"])):O("",!0)}}),se={name:"ButtonComp"},ne=w({...se,props:{button:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:u}){const n=e,i=[{label:"送出",value:"submit",type:"primary"},{label:"取消",value:"cancel",type:""}],o=V(()=>{const l=i.find(s=>s.value===n.button);return{type:(l==null?void 0:l.type)||"",label:(l==null?void 0:l.label)||"",value:(l==null?void 0:l.value)||""}}),a=V(()=>["submit"].includes(n.button)&&n.loading);return(l,s)=>(r(),b(t(le),$(l.$attrs,{type:t(o).type,loading:t(a),onClick:s[0]||(s[0]=c=>u("click",t(o).value))}),{default:v(()=>[I(l.$slots,"default",{},()=>[T(B(l.$t(t(o).label)),1)])]),_:3},16,["type","loading"]))}}),de={name:"MrcForm"},re=w({...de,props:{form:{type:Object,required:!0},fields:{type:Array,required:!0},labelPosition:{type:String,default:"top"},size:{type:String,default:"default"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},buttons:{type:[String,Array],default:()=>["cancel","submit"]},enterSubmit:{type:Boolean,default:!1}},setup(e,{emit:u}){const n=e,{isSpaceRequired:i}=j(),{$message:o}=L(),a=V(()=>typeof n.buttons=="string"?[n.buttons]:n.buttons),l=R(),s=()=>{l.value&&l.value.validate((f,m)=>{if(f)u("submit");else{if(!m)return;Object.keys(m).forEach(d=>{const z=n.fields.find(C=>C.prop===d);if(z&&z.label){const C=i.value?" ":"";o.error(g(z.label)+C+m[d][0].message)}})}})},c=f=>{switch(f){case"submit":s();break;case"cancel":u("cancel");break}};return(f,m)=>(r(),b(t(X),$({ref_key:"formRef",ref:l},f.$attrs,{model:e.form,"label-position":e.labelPosition,disabled:e.disabled||e.loading,size:e.size,onSubmit:m[0]||(m[0]=x(()=>{},["prevent"])),onKeyup:m[1]||(m[1]=D(d=>e.enterSubmit?s():"",["enter"]))}),{default:v(()=>[(r(!0),p(y,null,h(e.fields,d=>(r(),p(y,{key:d.prop},[d.visible!==!1?(r(),b(t(q),{key:0,prop:d.prop,label:d.label?f.$t(d.label):"",rules:d.rules},{default:v(()=>[I(f.$slots,`field:${d.prop}`,{field:d},()=>[S(ie,{form:e.form,field:d},null,8,["form","field"])],!0)]),_:2},1032,["prop","label","rules"])):O("",!0)],64))),128)),S(t(q),{class:"form-button"},{default:v(()=>[(r(!0),p(y,null,h(t(a),d=>(r(),b(ne,{key:d,button:d,loading:e.loading,onClick:c},{default:v(()=>[I(f.$slots,`button:${d}`,{},void 0,!0)]),_:2},1032,["button","loading"]))),128))]),_:3})]),_:3},16,["model","label-position","disabled","size"]))}}),ue=U(re,[["__scopeId","data-v-fd881eb3"]]),A={required:!0,message:g("validate.必填")},me={type:"email",message:g("validate.格式有誤")},fe=()=>{const{load:e,unload:u,isLoading:n}=te(),{route:i}=ae(),{$messageBox:o}=L(),a=localStorage.getItem(i.origin)??"",l=R(!0),s=P({email:a,password:"",remember:!!a}),c=V(()=>[{prop:"email",label:"電子信箱",rules:(()=>l.value?[A,me]:[])(),placeholder:l.value?"":"演示無需輸入",disabled:!l.value},{prop:"password",type:"password",label:"密碼",rules:l.value?A:[],placeholder:l.value?"":"演示無需輸入",disabled:!l.value},{prop:"remember"}]),f=async()=>{e(),l.value?(s.remember?localStorage.setItem(i.origin,s.email):localStorage.removeItem(i.origin),await M(s)):await o.confirm(g("演示站僅供查看"),g("提示"),{type:"warning",confirmButtonText:g("確認"),cancelButtonText:g("取消")}).then(()=>!0).catch(()=>!1)&&await N(),u()};return H(()=>l.value,()=>{l.value&&a?(s.email=a,s.password="",s.remember=!!a):(s.email="",s.password="")}),{isFormal:l,form:s,fields:c,isLoading:n,submitHandler:f}},ce=e=>(Z("data-v-31668ae8"),e=e(),J(),e),be={class:"login"},ve={class:"login-form"},ge=ce(()=>k("h1",{class:"login-title"},"Sign in",-1)),pe={class:"version"},ye={class:"mode-switch"},$e=w({__name:"index",setup(e){const{isFormal:u,form:n,fields:i,isLoading:o,submitHandler:a}=fe(),l="0.1.6";return(s,c)=>{const f=Y("loading");return K((r(),p("div",be,[k("div",ve,[ge,S(t(ue),{form:t(n),fields:t(i),buttons:"submit",onSubmit:c[1]||(c[1]=m=>t(a)())},{"field:remember":v(()=>[S(t(_),{modelValue:t(n).remember,"onUpdate:modelValue":c[0]||(c[0]=m=>t(n).remember=m),disabled:!t(u),label:s.$t("記住我的電子信箱")},null,8,["modelValue","disabled","label"])]),"button:submit":v(()=>[T(B(s.$t("登入")),1)]),_:1},8,["form","fields"]),k("div",pe,B(t(l)),1)]),k("div",ye,[S(t(ee),{modelValue:t(u),"onUpdate:modelValue":c[2]||(c[2]=m=>G(u)?u.value=m:null),"active-text":s.$t("正式"),"inactive-text":s.$t("演示")},null,8,["modelValue","active-text","inactive-text"])])])),[[f,t(o)]])}}});const Ee=U($e,[["__scopeId","data-v-31668ae8"]]);export{Ee as default};
